function add_moves() {
	var get = parseInt($('.moves').text());
	$('.moves').text(get + 1);
}

function total_box() {
	var total = $('.total_box').text();

	return total;
}

function total_selected() {

	var get = parseInt($('.total-selected').text());
	var total = get + 1;

	if (total == total_box()) {
		// clearInterval(interval);

		setTimeout(function () {
			$('.box').removeClass('trans');
		}, 3000);
		setTimeout(function () {
			$('.box').removeClass('trans');
			$('.game-menu').empty();
			$('.game-menu').html('<div id="gm"></div>');

			// $('.game').fadeOut();

			$('.total-selected').text(0);

			arrange();

			$('.moves').text('0');
			$('.seconds').text('0');

			// $('.start-menu').fadeIn(3000);

		}, 5000);

	} else {
		$('.total-selected').text(get + 1);
	}

}

$(document).on('click', '.start-btn', function () {

	$('.start-btn').text('Loading...');

	$('.start-menu').fadeOut(3000, 'swing', function () {
		$('.start-btn').text('Start');
		$('.game').fadeIn();
		arrange();

		interval = setInterval(function () {

			var get = parseInt($('.seconds').text());
			$('.seconds').text(get + 1);

		}, 1000);

	});

});

arrange();

$(document).on('click', '.change', function () {

	if ($(this).hasClass('trans') == true) {

		//$(this).removeClass('trans');

	} else {

		var selected = $('.selected').text();

		if (selected.length > 0) {

			add_moves();
			$(this).addClass('trans');
			$(this).addClass('active');

			var cur = $(this).find('.card__face_back').text();

			if (cur == selected) {
				$('.selected').text('');
				$('.box').removeClass('active');

				total_selected();

			} else {
				setTimeout(function () {
					$('.active').removeClass('trans');
					$('.box').removeClass('active');
				}, 1000);

				$('.selected').text('');
			}

		} else {

			$(this).addClass('trans');
			$(this).addClass('active');
			$('.selected').text($(this).find('.card__face_back').text());

		}
	}

});

function arrange() {

	var rand = Math.floor((Math.random() * 7) + 1);

	if (rand == 1) {

		var mode = ['A', 'A', 'B', 'B', 'C', 'C', 'D', 'D', 'E', 'E', 'F', 'F', 'G', 'G', 'H', 'H', 'I', 'I', 'J', 'J'];
		var total_box = $('.total_box').text(10);

	} else if (rand == 2) {

		var mode = ['Z', 'Z', 'Y', 'Y', 'X', 'X', 'W', 'W', 'V', 'V', 'U', 'U', 'T', 'T', 'S', 'S', 'R', 'R', 'Q', 'Q'];
		var total_box = $('.total_box').text(10);

	} else if (rand == 3) {

		var mode = ['1', '1', '2', '2', '3', '3', '4', '4', '5', '5', '6', '6', '7', '7', '8', '8', '9', '9', '0', '0'];
		var total_box = $('.total_box').text(10);

	} else if (rand == 4) {

		var mode = ['~', '~', '!', '!', '@', '@', '#', '#', '$', '$', '%', '%', '?', '?', '&', '&', '{', '{', ']', ']'];
		var total_box = $('.total_box').text(10);

	} else if (rand == 5) {

		var mode = ['~', '~', '!', '!', '@', '@', '#', '#', '$', '$'];
		var total_box = $('.total_box').text(5);

	} else if (rand == 6) {

		var mode = ['1', '1', '2', '2', '3', '3', '4', '4', '5', '5'];
		var total_box = $('.total_box').text(5);

	} else if (rand == 7) {

		var mode = ['&', '&', '{', '{', ']', ']', '5', '5'];
		var total_box = $('.total_box').text(4);

	}

	var arr = shuffle(mode);

	arr.forEach(function (item, index) {
		split_it(item);
	});

}

function split_it(item) {

	$('#gm').after(`
	<div class="change box game-card">
		<div class="card__face card_face_front"></div>
		<div class="card__face card__face_back">
			<p>` + item + `</p>
		</div>
	</div>`);

}

function shuffle(arra1) {
	var ctr = arra1.length,
		temp, index;

	while (ctr > 0) {

		index = Math.floor(Math.random() * ctr);

		ctr--;

		temp = arra1[ctr];
		arra1[ctr] = arra1[index];
		arra1[index] = temp;
	}
	return arra1;
}
